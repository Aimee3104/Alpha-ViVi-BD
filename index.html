<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Birthday RSVP</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-pink-100 via-yellow-50 to-blue-100 min-h-screen flex justify-center p-6">
  <div class="bg-white rounded-2xl shadow-xl p-6 max-w-xl w-full text-center">
    <img src="banner.png" alt="Happy Birthday" class="rounded-xl w-full object-cover mb-6" />
    <h1 class="text-3xl font-extrabold text-purple-800 mb-2">Alpha Vivi's Birthday</h1>
    <p class="text-gray-600 mb-4 font-medium">Let us know if you can come!</p>

    <form onsubmit="return submitForm(event)" class="space-y-4">
      <input type="text" id="name" placeholder="Your Name" required
             class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-400" />
      <input type="email" id="email" placeholder="Your Email" required
             class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-400" />
      <select id="attendance" required onchange="toggleDateOptions(this.value)"
              class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-400">
        <option value="">Will you attend?</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
      <div id="dateOptions" class="hidden">
        <select id="date"
                class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-400">
          <option value="">Select preferred date</option>
          <option value="July 16, 2025 at 6 PM">🌟 July 16, 2025 at 6 PM</option>
          <option value="July 21, 2025 at 6 PM">🎉 July 21, 2025 at 6 PM</option>
        </select>
      </div>
      <button type="submit"
              class="w-full py-3 bg-purple-500 text-white font-bold rounded-xl hover:bg-purple-600 transition">
        Submit RSVP
      </button>
    </form>
  </div>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbx28Owzx1HDpd5qSRC0nIb_aUelAWRWTtx6MeX67J2W-ZY0W8L8Y-TxzTmW4F2w4iuz/exec"; 

    function toggleDateOptions(value) {
      const dateOptions = document.getElementById('dateOptions');
      dateOptions.classList.toggle('hidden', value !== 'Yes');
    }

    function submitForm(e) {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const attendance = document.getElementById('attendance').value;
      const date = document.getElementById('date').value;

      if (attendance === 'Yes' && !date) {
        alert('⚠️ Please choose a date.');
        return;
      }

      const formData = new FormData();
      formData.append('name', name);
      formData.append('email', email);
      formData.append('attendance', attendance);
      formData.append('date', date);

      fetch(scriptURL, {
        method: 'POST',
        body: formData
      })
      .then(response => response.text())
      .then(result => {
        console.log(result);
        alert('✅ RSVP submitted!');
        document.querySelector('form').reset();
        toggleDateOptions('');
      })
      .catch(err => {
        console.error('Submission error:', err);
        alert('❌ Failed to submit. Try again later.');
      });
    }
  </script>
</body>
</html>
